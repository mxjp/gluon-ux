@use "sass:map";

@mixin set-theme-vars($defs, $target) {
	@each $name, $targets in $defs {
		@if map.has-key($targets, $target) {
			--#{$name}: #{map.get($targets, $target)};
		}
	}
}

@mixin theme($defs) {
	:root {
		@include set-theme-vars($defs, light);
		@media (prefers-color-scheme: dark) {
			@include set-theme-vars($defs, dark);
			color-scheme: dark;
		}

		@media (prefers-contrast: more) {
			@include set-theme-vars($defs, light-hc);
			@media (prefers-color-scheme: dark) {
				@include set-theme-vars($defs, dark-hc);
			}
		}
	}
}

@mixin define-quad($name, $top, $right: $top, $bottom: $top, $left: $right) {
	--#{$name}-top: #{$top};
	--#{$name}-right: #{$right};
	--#{$name}-bottom: #{$bottom};
	--#{$name}-left: #{$left};
}

@function quad($name) {
	@return
		var(--#{$name}-top)
		var(--#{$name}-right)
		var(--#{$name}-bottom)
		var(--#{$name}-left);
}

@function quad-sub($name, $sub) {
	@return
		calc(var(--#{$name}-top) - #{$sub})
		calc(var(--#{$name}-right) - #{$sub})
		calc(var(--#{$name}-bottom) - #{$sub})
		calc(var(--#{$name}-left) - #{$sub});
}
